/*!
 * bootstrap-dropdownform.js v0.0.1
 * https://github.com/olegsmith/bootstrap.dropdownform
 * ============================================================
 * Copyright 2013 (c) olegsmith
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * http://www.apache.org/licenses/LICENSE-2.0.txt
 * ============================================================ */
!function(o){"use strict";function n(){o(a).each(function(){e(o(this)).removeClass("openform")})}function t(){o(d).each(function(){e(o(this)).removeClass("open")})}function r(t){0==o(t.target).parents(".openform").length&&n()}function e(n){var t,r=n.attr("data-target");return r||(r=n.attr("href"),r=r&&/#/.test(r)&&r.replace(/.*(?=#[^\s]*$)/,"")),t=r&&o(r),t&&t.length||(t=n.parent()),t}var a="[data-toggle=dropdownform]",d="[data-toggle=dropdown]",i=function(n){var t=o(n).on("click.dropdownform.data-api",this.toggle);o("html").on("click.dropdownform.data-api",function(){t.parent().removeClass("openform")})};i.prototype={constructor:i,toggle:function(r){var a,d,i=o(this);if(!i.is(".disabled, :disabled"))return a=e(i),d=a.hasClass("openform"),n(),t(r),d||a.toggleClass("openform"),i.focus(),!1},keydown:function(n){var t,r,d,i,f;if(/(38|40|27)/.test(n.keyCode)&&(t=o(this),n.preventDefault(),n.stopPropagation(),!t.is(".disabled, :disabled"))){if(d=e(t),i=d.hasClass("openform"),!i||i&&27==n.keyCode)return 27==n.which&&d.find(a).focus(),t.click();r=o("[role=menu] li:not(.divider):visible a",d),r.length&&(f=r.index(r.filter(":focus")),38==n.keyCode&&f>0&&f--,40==n.keyCode&&r.length-1>f&&f++,~f||(f=0),r.eq(f).focus())}}};var f=o.fn.dropdown;o.fn.dropdownform=function(n){return this.each(function(){var t=o(this),r=t.data("dropdownform");r||t.data("dropdownform",r=new i(this)),"string"==typeof n&&r[n].call(t)})},o.fn.dropdown.Constructor=i,o.fn.dropdownform.noConflict=function(){return o.fn.dropdownform=f,this},o(document).on("click.dropdownform.data-api",r).on("click.dropdown.data-api","[data-toggle=dropdown]",r).on("click.dropdownform.data-api",".apply, .cancel",n).on("click.dropdownform.data-api",a,i.prototype.toggle)}(window.jQuery);